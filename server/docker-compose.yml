version: "3"
services: 
    app:
        build: 
          context: . 
          dockerfile: Dockerfile
        volumes:
            - ./src:/app/src
        ports:
            - "8080:8080"
    db:
        image: mysql
        env_file: ./.env
        environment:
          - MYSQL_ROOT_PASSWORD=$MYSQLDB_ROOT_PASSWORD
          - MYSQL_DATABASE=$MYSQLDB_DATABASE
        ports:
          - $MYSQLDB_LOCAL_PORT:$MYSQLDB_DOCKER_PORT
        volumes: 
            - db-data:/var/lib/mysql
    
volumes: 
    db-data:
      external: true
